<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ù†ØµØ© Ø¹Ù…Ø§Ø¯ Ø§Ù„Ø³Ø¹Ø¯ÙŠ Ù„Ù„ÙÙ‡Ø±Ø³Ø© Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ© | MARC21</title>
    <!-- Ù…ÙƒØªØ¨Ø© ØªØµØ¯ÙŠØ± Ø¥ÙƒØ³Ù„ -->
    <script src="https://cdnjs.cloudflare.com"></script>
    <style>
        :root { --primary: #0f172a; --secondary: #e11d48; --accent: #f59e0b; --success: #10b981; --light: #f1f5f9; --border: #cbd5e1; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: #f8fafc; margin: 0; padding: 20px; color: #334155; }
        .container { max-width: 1550px; margin: auto; background: white; padding: 30px; border-radius: 20px; box-shadow: 0 20px 40px rgba(0,0,0,0.08); border-top: 10px solid var(--primary); }
        header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #f1f5f9; padding-bottom: 20px; }
        header h1 { margin: 0; color: var(--primary); font-size: 1.8em; }
        .loc-link { background: #fffbeb; border: 1px solid #f59e0b; padding: 8px 15px; border-radius: 8px; text-decoration: none; color: #b45309; font-weight: bold; font-size: 0.9em; display: inline-block; margin-top: 10px; }
        .search-engine { background: var(--primary); padding: 20px; border-radius: 12px; display: flex; gap: 10px; margin-bottom: 25px; }
        .search-engine input { flex: 1; padding: 12px 15px; border-radius: 6px; border: none; font-size: 1em; outline: none; }
        .btn-z39 { background: var(--accent); color: var(--primary); padding: 12px 25px; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; }
        .main-layout { display: grid; grid-template-columns: 1fr 420px; gap: 30px; }
        .toolbar-group { background: var(--light); padding: 15px; border-radius: 10px; margin-bottom: 15px; border: 1px solid var(--border); }
        .toolbar-group h4 { margin: 0 0 10px 0; font-size: 0.95em; color: #475569; }
        .btns-flex { display: flex; gap: 8px; flex-wrap: wrap; }
        .btn-tag { padding: 6px 12px; font-size: 0.85em; background: white; border: 1px solid #94a3b8; border-radius: 4px; cursor: pointer; font-weight: 600; }
        .marc-table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        .marc-table th { background: var(--primary); color: white; padding: 12px; text-align: right; font-size: 0.9em; }
        .marc-table td { border-bottom: 1px solid #e2e8f0; padding: 10px; }
        .tag-input { width: 55px; text-align: center; border: 1px solid #cbd5e1; padding: 8px; border-radius: 4px; font-weight: bold; color: var(--secondary); }
        .ind-input { width: 30px; text-align: center; border: 1px solid #cbd5e1; padding: 8px; border-radius: 4px; margin: 0 2px; }
        .data-input { width: 100%; padding: 8px 12px; border: 1px solid #cbd5e1; border-radius: 4px; direction: rtl; font-size: 0.95em; }
        .side-panel { display: flex; flex-direction: column; gap: 15px; position: sticky; top: 20px; }
        .preview-box { background: #1e293b; color: #38bdf8; padding: 20px; border-radius: 12px; font-family: monospace; direction: ltr; text-align: left; min-height: 350px; border-left: 6px solid var(--accent); white-space: pre-wrap; font-size: 0.9em; overflow-y: auto; }
        .action-btn { width: 100%; padding: 14px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; color: white; }
        .btn-save { background: #2563eb; }
        .btn-excel { background: var(--success); }
        .btn-clear { background: var(--secondary); }
        .field-select { width: 100%; border: 2px solid var(--accent); padding: 10px; border-radius: 6px; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>Ù†Ø¸Ø§Ù… Ø¹Ù…Ø§Ø¯ Ø§Ù„Ø³Ø¹Ø¯ÙŠ Ù„Ù„ÙÙ‡Ø±Ø³Ø© Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ© (MARC21)</h1>
        <a href="https://www.bibalex.org" target="_blank" class="loc-link">ğŸ”— Ù…Ø±Ø¬Ø¹ Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ© - Ø¯Ù„ÙŠÙ„ Ù…Ø§Ø±Ùƒ Ø§Ù„Ø¹Ø±Ø¨ÙŠ</a>
    </header>

    <div class="search-engine">
        <input type="text" id="queryInput" placeholder="Ø£Ø¯Ø®Ù„ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙƒØªØ§Ø¨ Ø£Ùˆ Ø§Ù„Ø±Ø¯Ù…Ùƒ Ù„Ù„Ø¬Ù„Ø¨ Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠ...">
        <button class="btn-z39" onclick="fetchDemo()">ğŸ“¡ Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­Ø§ÙƒØ§Ø©</button>
    </div>

    <div class="main-layout">
        <div class="editor">
            <div class="toolbar-group">
                <h4>Ù…Ø³Ø§Ø¹Ø¯ Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ© (Ø§Ø®ØªØ± Ø­Ù‚Ù„ Ù„Ø¥Ø¶Ø§ÙØªÙ‡ ÙÙˆØ±Ø§Ù‹):</h4>
                <select id="fieldSelector" class="field-select" onchange="addFromSelector()">
                    <option value="">-- Ø§Ø¨Ø­Ø« Ø¹Ù† Ø­Ù‚Ù„ (Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø¨Ù„ÙŠÙˆØºØ±Ø§ÙÙŠØ© Ø£Ùˆ Ù…Ø­Ù„ÙŠØ© 9XX) --</option>
                </select>
            </div>

            <div class="toolbar-group">
                <h4>Ø§Ø®ØªØµØ§Ø±Ø§Øª Ø³Ø±ÙŠØ¹Ø©:</h4>
                <div class="btns-flex">
                    <button class="btn-tag" onclick="addRow('020','#','#','$a ')">020 Ø±Ø¯Ù…Ùƒ</button>
                    <button class="btn-tag" onclick="addRow('100','1','#','$a ')">100 Ù…Ø¤Ù„Ù</button>
                    <button class="btn-tag" onclick="addRow('245','1','0','$a $b $c ')">245 Ø¹Ù†ÙˆØ§Ù†</button>
                    <button class="btn-tag" onclick="addRow('264','#','1','$a $b $c ')">264 Ù†Ø´Ø±</button>
                    <button class="btn-tag" onclick="addRow('300','#','#','$a $b $c ')">300 Ù…Ø§Ø¯ÙŠ</button>
                    <button class="btn-tag" onclick="addRow('952','#','#','$p $a $b $c $y ')">952 Ø¬Ø±Ø¯</button>
                </div>
            </div>

            <table class="marc-table">
                <thead><tr><th>Ø§Ù„ØªØ§Ø¬</th><th>Ù…Ø¤Ø´Ø±Ø§Øª</th><th>Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØ±Ø¹ÙŠØ©</th><th></th></tr></thead>
                <tbody id="marcBody"></tbody>
            </table>
        </div>

        <div class="side-panel">
            <div class="preview-box" id="preview">LDR 00000nam a2200000 i 4500</div>
            <button class="action-btn btn-save" onclick="saveRecord()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø³Ø¬Ù„ Ù…Ø­Ù„ÙŠØ§Ù‹</button>
            <button class="action-btn btn-excel" onclick="exportExcel()">ğŸ“Š ØªØµØ¯ÙŠØ± Ø¥Ù„Ù‰ Excel</button>
            <button class="action-btn btn-clear" onclick="clearForm()">ğŸ”„ ØªÙØ±ÙŠØº Ø§Ù„Ø³Ø¬Ù„</button>
        </div>
    </div>
</div>

<script>
    // Ø§Ù„Ù…ØµÙÙˆÙØ© Ø§Ù„Ø´Ø§Ù…Ù„Ø© Ù„Ù„Ø­Ù‚ÙˆÙ„
    const bibAlexFields = [
        { tag: '010', ind1: '#', ind2: '#', sub: '$a ', label: '010 - Ø±Ù‚Ù… Ø¶Ø¨Ø· Ù…ÙƒØªØ¨Ø© Ø§Ù„ÙƒÙˆÙ†Ø¬Ø±Ø³' },
        { tag: '020', ind1: '#', ind2: '#', sub: '$a $q $c ', label: '020 - Ø±Ø¯Ù…Ùƒ (ISBN)' },
        { tag: '040', ind1: '#', ind2: '#', sub: '$a $b $e $c ', label: '040 - Ù…ØµØ¯Ø± Ø§Ù„ÙÙ‡Ø±Ø³Ø©' },
        { tag: '050', ind1: '#', ind2: '4', sub: '$a $b ', label: '050 - ØªØµÙ†ÙŠÙ Ù…ÙƒØªØ¨Ø© Ø§Ù„ÙƒÙˆÙ†Ø¬Ø±Ø³' },
        { tag: '082', ind1: '0', ind2: '4', sub: '$a $b $2 ', label: '082 - ØªØµÙ†ÙŠÙ Ø¯ÙŠÙˆÙŠ Ø§Ù„Ø¹Ø´Ø±ÙŠ' },
        { tag: '100', ind1: '1', ind2: '#', sub: '$a $d $e $q ', label: '100 - Ù…Ø¯Ø®Ù„ Ø±Ø¦ÙŠØ³ÙŠ Ø§Ø³Ù… Ø´Ø®Øµ' },
        { tag: '110', ind1: '2', ind2: '#', sub: '$a $b $c ', label: '110 - Ù…Ø¯Ø®Ù„ Ø±Ø¦ÙŠØ³ÙŠ Ø§Ø³Ù… Ù‡ÙŠØ¦Ø©' },
        { tag: '130', ind1: '0', ind2: '#', sub: '$a $l $m $n $p ', label: '130 - Ù…Ø¯Ø®Ù„ Ø±Ø¦ÙŠØ³ÙŠ: Ø¹Ù†ÙˆØ§Ù† Ù…ÙˆØ­Ø¯' },
        { tag: '245', ind1: '1', ind2: '0', sub: '$a $b $c ', label: '245 - Ø¨ÙŠØ§Ù† Ø§Ù„Ø¹Ù†ÙˆØ§Ù†' },
        { tag: '246', ind1: '3', ind2: '0', sub: '$a $b $n $p ', label: '246 - Ø´ÙƒÙ„ Ù…ØªØºÙŠØ± Ù„Ù„Ø¹Ù†ÙˆØ§Ù† (Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØºÙ„Ø§Ù/Ø§Ù„Ø¸Ù‡Ø±)' },
        { tag: '250', ind1: '#', ind2: '#', sub: '$a $b ', label: '250 - Ø¨ÙŠØ§Ù† Ø§Ù„Ø·Ø¨Ø¹Ø©' },
        { tag: '260', ind1: '#', ind2: '#', sub: '$a $b $c ', label: '260 - Ø¨ÙŠØ§Ù† Ø§Ù„Ù†Ø´Ø± (Ù‚Ø¯ÙŠÙ…)' },
        { tag: '264', ind1: '#', ind2: '1', sub: '$a $b $c ', label: '264 - Ø¨ÙŠØ§Ù† Ø§Ù„Ù†Ø´Ø± (RDA)' },
        { tag: '300', ind1: '#', ind2: '#', sub: '$a $b $c $e ', label: '300 - Ø§Ù„ÙˆØµÙ Ø§Ù„Ù…Ø§Ø¯ÙŠ' },
        { tag: '336', ind1: '#', ind2: '#', sub: '$a $b $2 ', label: '336 - Ù†ÙˆØ¹ Ø§Ù„Ù…Ø­ØªÙˆÙ‰' },
        { tag: '337', ind1: '#', ind2: '#', sub: '$a $b $2 ', label: '337 - Ù†ÙˆØ¹ Ø§Ù„ÙˆØ³ÙŠØ·' },
        { tag: '490', ind1: '1', ind2: '#', sub: '$a $v ', label: '490 - Ø¨ÙŠØ§Ù† Ø§Ù„Ø³Ù„Ø³Ù„Ø©' },
        { tag: '500', ind1: '#', ind2: '#', sub: '$a ', label: '500 - ØªØ¨ØµØ±Ø© Ø¹Ø§Ù…Ø©' },
        { tag: '504', ind1: '#', ind2: '#', sub: '$a ', label: '504 - ØªØ¨ØµØ±Ø© Ø¨Ø¨Ù„ÙŠÙˆØºØ±Ø§ÙÙŠØ©' },
        { tag: '505', ind1: '0', ind2: '#', sub: '$a $t ', label: '505 - ØªØ¨ØµØ±Ø© Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª' },
        { tag: '600', ind1: '1', ind2: '4', sub: '$a $d $t $v $x $y $z ', label: '600 - Ù…ÙˆØ¶ÙˆØ¹: Ø§Ø³Ù… Ø´Ø®Øµ' },
        { tag: '610', ind1: '2', ind2: '4', sub: '$a $b $v $x $y $z ', label: '610 - Ù…ÙˆØ¶ÙˆØ¹: Ø§Ø³Ù… Ù‡ÙŠØ¦Ø©' },
        { tag: '611', ind1: '2', ind2: '4', sub: '$a $n $d $c $v $x $y $z ', label: '611 - Ù…ÙˆØ¶ÙˆØ¹: Ø§Ø³Ù… Ù…Ø¤ØªÙ…Ø±' },
        { tag: '650', ind1: '#', ind2: '4', sub: '$a $x $v $y $z ', label: '650 - Ù…ÙˆØ¶ÙˆØ¹ Ù…ØµØ·Ù„Ø­ Ø¹Ø§Ù…' },
        { tag: '700', ind1: '1', ind2: '#', sub: '$a $d $e $t ', label: '700 - Ù…Ø¯Ø®Ù„ Ø¥Ø¶Ø§ÙÙŠ Ø§Ø³Ù… Ø´Ø®Øµ' },
        { tag: '710', ind1: '2', ind2: '#', sub: '$a $b $e $4 ', label: '710 - Ù…Ø¯Ø®Ù„ Ø¥Ø¶Ø§ÙÙŠ: Ø§Ø³Ù… Ù‡ÙŠØ¦Ø©' },
        { tag: '711', ind1: '2', ind2: '#', sub: '$a $n $d $c $e $j ', label: '711 - Ù…Ø¯Ø®Ù„ Ø¥Ø¶Ø§ÙÙŠ: Ø§Ø³Ù… Ù…Ø¤ØªÙ…Ø±' },
        { tag: '900', ind1: '#', ind2: '#', sub: '$a ', label: '900 - Ø±Ù‚Ù… ØªØ³Ø¬ÙŠÙ„ Ù…Ø­Ù„ÙŠ' },
        { tag: '942', ind1: '#', ind2: '#', sub: '$c ', label: '942 - Ù†ÙˆØ¹ Ø§Ù„Ù…Ø§Ø¯Ø© (Ù†Ø¸Ø§Ù…)' },
        { tag: '952', ind1: '#', ind2: '#', sub: '$a $b $c $p $y ', label: '952 - Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù†Ø³Ø® ÙˆØ§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯' }
    ];

    window.onload = () => {
        const selector = document.getElementById('fieldSelector');
        bibAlexFields.forEach((field, index) => {
            let option = document.createElement('option');
            option.value = index;
            option.textContent = field.label;
            selector.appendChild(option);
        });
    };

    function addRow(tag = '', i1 = '#', i2 = '#', data = '') {
        const tbody = document.getElementById('marcBody');
        const row = tbody.insertRow();
        row.innerHTML = `
            <td><input type="text" class="tag-input" value="${tag}" oninput="updatePreview()"></td>
            <td>
                <input type="text" class="ind-input" value="${i1}" oninput="updatePreview()">
                <input type="text" class="ind-input" value="${i2}" oninput="updatePreview()">
            </td>
            <td><input type="text" class="data-input" value="${data}" oninput="updatePreview()"></td>
            <td><button onclick="this.parentElement.parentElement.remove(); updatePreview();" style="border:none; background:none; cursor:pointer;">ğŸ—‘ï¸</button></td>
        `;
        updatePreview();
    }

    function addFromSelector() {
        const idx = document.getElementById('fieldSelector').value;
        if(idx === "") return;
        const f = bibAlexFields[idx];
        addRow(f.tag, f.ind1, f.ind2, f.sub);
        document.getElementById('fieldSelector').value = "";
    }

    function updatePreview() {
        let text = "LDR 00000nam a2200000 i 4500\n";
        document.querySelectorAll('#marcBody tr').forEach(row => {
            const tag = row.querySelector('.tag-input').value;
            const inds = row.querySelectorAll('.ind-input');
            const data = row.querySelector('.data-input').value;
            if(tag) text += `${tag} ${inds[0].value}${inds[1].value} ${data}\n`;
        });
        document.getElementById('preview').textContent = text;
    }

    function fetchDemo() {
        const q = document.getElementById('queryInput').value || "Ø§Ù„ÙÙ‡Ø±Ø³Ø© ÙÙŠ Ø§Ù„Ø¹ØµØ± Ø§Ù„Ø±Ù‚Ù…ÙŠ";
        clearForm();
        addRow('020', '#', '#', '$a 9789953683119');
        addRow('100', '1', '#', '$a Ø§Ù„Ø³Ø¹Ø¯ÙŠØŒ Ø¹Ù…Ø§Ø¯.');
        addRow('245', '1', '0', `$a ${q} : $b Ø¯Ø±Ø§Ø³Ø© ÙÙŠ Ù‚ÙˆØ§Ø¹Ø¯ Ù…Ø§Ø±Ùƒ 21 / $c ØªØ£Ù„ÙŠÙ Ø¹Ù…Ø§Ø¯ Ø§Ù„Ø³Ø¹Ø¯ÙŠ.`);
        addRow('264', '#', '1', '$a Ø§Ù„Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ© : $b Ø¯Ø§Ø± Ø§Ù„Ù…Ø¹Ø±ÙØ© Ø§Ù„Ø¬Ø§Ù…Ø¹ÙŠØ©ØŒ $c 2024.');
        addRow('300', '#', '#', '$a 250 Øµ. Ø› $c 24 Ø³Ù….');
        addRow('952', '#', '#', '$a MAIN $b LIB $c SHELF-1 $p 50001234 $y BOOK');
    }

    function exportExcel() {
        let rows = [["Ø§Ù„ØªØ§Ø¬", "Ù…Ø¤Ø´Ø± 1", "Ù…Ø¤Ø´Ø± 2", "Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„ÙØ±Ø¹ÙŠØ©"]];
        document.querySelectorAll('#marcBody tr').forEach(tr => {
            const tag = tr.querySelector('.tag-input').value;
            const inds = tr.querySelectorAll('.ind-input');
            const data = tr.querySelector('.data-input').value;
            rows.push([tag, inds[0].value, inds[1].value, data]);
        });
        const worksheet = XLSX.utils.aoa_to_sheet(rows);
        const workbook = XLSX.utils.book_new();
        XLSX.utils.book_append_sheet(workbook, worksheet, "MARC_Data");
        XLSX.writeFile(workbook, "Emad_AlSaadi_Cataloging.xlsx");
    }

    function saveRecord() {
        localStorage.setItem('last_record', document.getElementById('preview').textContent);
        alert("ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø³Ø¬Ù„ ÙÙŠ Ø°Ø§ÙƒØ±Ø© Ø§Ù„Ù…ØªØµÙØ­ Ø¨Ù†Ø¬Ø§Ø­!");
    }

    function clearForm() {
        document.getElementById('marcBody').innerHTML = '';
        updatePreview();
    }
</script>

</body>
</html>


